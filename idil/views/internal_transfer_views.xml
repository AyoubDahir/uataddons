<?xml version="1.0" encoding="UTF-8"?>
<odoo>
 
    <record id="view_internal_transfer_tree" model="ir.ui.view">
        <field name="name">idil.internal.transfer.tree</field>
        <field name="model">idil.internal.transfer</field>
        <field name="arch" type="xml">
            <tree string="Internal Transfers" default_order="id desc">
                <field name="name"/>
                <field name="transfer_date"/>
                <field name="source_warehouse_id"/>
                <field name="source_location_id"/>
                <field name="destination_warehouse_id"/>
                <field name="destination_location_id"/>
                <field name="move_ref"/>
            </tree>
        </field>
    </record>

   
    <record id="view_internal_transfer_form" model="ir.ui.view">
        <field name="name">idil.internal.transfer.form</field>
        <field name="model">idil.internal.transfer</field>
        <field name="arch" type="xml">
            <form string="ðŸ“¦ Internal Transfer" class="o_form_nosheet">

                <header>
                    <button name="action_submit"
                            type="object"
                            string="ðŸ“¤ Submit"
                            class="btn-primary"/>

                    <button name="action_approve"
                            type="object"
                            string="âœ… Approve"
                            class="btn-primary"/>

                    <button string="âœ– Cancel"
                            special="cancel"
                            class="btn-secondary"/>
                </header>

                <sheet>
 
                    <div class="oe_title">
                        <h1 class="mb-1">
                            <i class="fa fa-exchange me-2 text-primary" role="img" aria-label="Transfer"/>
                            Internal Transfer
                        </h1>

                        <div class="text-muted">
                            <i class="fa fa-info-circle me-1"/>
                            Move items between warehouses and locations with full stock validation and movement tracking.
                        </div>

                        <div class="mt-2">
                            <div class="badge rounded-pill bg-light border text-muted px-3 py-2">
                                <i class="fa fa-hashtag me-1"/>
                                <field name="name" readonly="1" nolabel="1"/>
                            </div>

                            <span class="ms-2 badge rounded-pill bg-light border text-muted px-3 py-2">
                                <i class="fa fa-calendar me-1"/>
                                <field name="transfer_date" nolabel="1"/>
                            </span>

                            <span class="ms-2 badge rounded-pill bg-light border text-muted px-3 py-2">
                                <i class="fa fa-link me-1"/>
                                <field name="move_ref" readonly="1" nolabel="1"/>
                            </span>
                        </div>
                    </div>
 
                    <div class="row g-3 mt-3">

                        <!-- From -->
                        <div class="col-12 col-lg-6">
                            <div class="border rounded-4 p-3 shadow-sm bg-white">
                                <div class="fw-bold mb-2">
                                    <i class="fa fa-sign-out me-2 text-muted"/>
                                    From
                                </div>

                                <div class="d-grid gap-2">
                                    <div class="d-flex align-items-center">
                                        <i class="fa fa-building-o me-2 text-muted"/>
                                        <field name="source_warehouse_id" nolabel="1" class="w-100"/>
                                    </div>

                                    <div class="d-flex align-items-center">
                                        <i class="fa fa-map-marker me-2 text-muted"/>
                                        <field name="source_location_id" nolabel="1" class="w-100"/>
                                    </div>
                                </div>

                                <div class="alert alert-light mt-3 mb-0" role="alert">
                                    <i class="fa fa-shield me-1"/>
                                    Stock availability is validated from this location.
                                </div>
                            </div>
                        </div>

                        <!-- To -->
                        <div class="col-12 col-lg-6">
                            <div class="border rounded-4 p-3 shadow-sm bg-white">
                                <div class="fw-bold mb-2">
                                    <i class="fa fa-sign-in me-2 text-muted"/>
                                    To
                                </div>

                                <div class="d-grid gap-2">
                                    <div class="d-flex align-items-center">
                                        <i class="fa fa-building me-2 text-muted"/>
                                        <field name="destination_warehouse_id" nolabel="1" class="w-100"/>
                                    </div>

                                    <div class="d-flex align-items-center">
                                        <i class="fa fa-map-pin me-2 text-muted"/>
                                        <field name="destination_location_id" nolabel="1" class="w-100"/>
                                    </div>
                                </div>

                                <div class="alert alert-info mt-3 mb-0" role="alert">
                                    <i class="fa fa-lightbulb-o me-1"/>
                                    Tip: choose correct destination location for accurate traceability.
                                </div>
                            </div>
                        </div>

                    </div>
 
                    <notebook class="mt-3">

                        <!-- Products -->
                        <page string="ðŸ“¦ Products" name="page_products">
                            <div class="border rounded-4 p-3 shadow-sm bg-white">
                                <div class="fw-bold mb-2">
                                    <i class="fa fa-cubes me-2 text-muted"/>
                                    Transfer Lines
                                </div>

                                <field name="line_ids" nolabel="1">
                                    <tree editable="bottom">
                                        <field name="item_id"/>
                                        <field name="qty"/>
                                        <field name="available_qty" readonly="1"/>
                                    </tree>
                                </field>

                                <div class="text-muted mt-2">
                                    <i class="fa fa-check-circle-o me-1"/>
                                    When approved, system creates two movements per line (OUT from source, IN to destination).
                                </div>
                            </div>
                        </page>

                        <!-- Traceability -->
                        <page string="ðŸ§¾ Traceability" name="page_trace">
                            <div class="border rounded-4 p-3 shadow-sm bg-white">
                                <div class="fw-bold mb-2">
                                    <i class="fa fa-chain me-2 text-muted"/>
                                    Movement Reference
                                </div>

                                <div class="d-flex align-items-center">
                                    <i class="fa fa-link me-2 text-muted"/>
                                    <field name="move_ref" readonly="1" nolabel="1" class="w-100"/>
                                </div>

                                <div class="alert alert-light mt-3 mb-0" role="alert">
                                    <i class="fa fa-info-circle me-1"/>
                                    This reference links all generated item movements for audit purposes.
                                </div>
                            </div>
                        </page>

                        <!-- Notes -->
                        <page string="ðŸ“ Notes" name="page_notes">
                            <div class="border rounded-4 p-3 shadow-sm bg-white">
                                <div class="fw-bold mb-2">
                                    <i class="fa fa-sticky-note-o me-2 text-muted"/>
                                    Notes
                                </div>

                                <field name="notes" nolabel="1" placeholder="Internal notes..."/>
                            </div>
                        </page>

                    </notebook>

                </sheet>

                <!-- Chatter -->
                <div class="oe_chatter">
                    <field name="message_follower_ids"/>
                    <field name="activity_ids"/>
                    <field name="message_ids"/>
                </div>

            </form>
        </field>
    </record>

 
    <record id="action_internal_transfer" model="ir.actions.act_window">
        <field name="name">Internal Transfers</field>
        <field name="res_model">idil.internal.transfer</field>
        <field name="view_mode">tree,form</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Create Internal Transfers between warehouses and locations.
            </p>
        </field>
    </record>

</odoo>
