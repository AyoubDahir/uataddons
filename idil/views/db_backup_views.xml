<?xml version="1.0" encoding="UTF-8"?>
<odoo>

    <record id="action_bizcore_db_backup_wizard" model="ir.actions.act_window">
        <field name="name">Database Backup &amp; Restore</field>
        <field name="res_model">bizcore.db.backup.wizard</field>
        <field name="view_mode">form</field>
        <field name="target">new</field>
    </record>

    <record id="view_bizcore_db_backup_wizard_form" model="ir.ui.view">
        <field name="name">bizcore.db.backup.wizard.form</field>
        <field name="model">bizcore.db.backup.wizard</field>
        <field name="arch" type="xml">
            <form string="Database Backup &amp; Restore" create="false" edit="false">
                <sheet>

                    <div class="oe_title">
                        <h1>Database Backup &amp; Restore</h1>
                        <p class="text-muted">
                            Backup creates a full ZIP (database + attachments). Restore creates a new database safely.
                        </p>
                    </div>

                    <notebook>
                        <page string="Backup">
                            <group>
                                <field name="backup_name" readonly="1"/>
                                <field name="attachment_id" invisible="1"/>
                            </group>

                            <div class="mt16" >
                                <p class="text-success">Backup ready. You can download it again.</p>
                            </div>

                            <footer>
                                <button name="action_backup_now"
                                        type="object"
                                        string="Backup Now"
                                        class="btn-primary"/>

                                <button name="action_download_backup"
                                        type="object"
                                        string="Download Backup"
                                        class="btn-secondary"
                                        />

                                <button string="Close" special="cancel" class="btn-secondary"/>
                            </footer>
                        </page>

                        <page string="Restore">
                            <group>
                                <field name="restore_zip" filename="restore_zip_filename"/>
                                <field name="restore_zip_filename" invisible="1"/>
                                <field name="restore_db_name" placeholder="example: idil_restore_20251222"/>
                            </group>

                            <group >
                                <field name="restore_result" readonly="1" nolabel="1"/>
                            </group>

                            <footer>
                                <button name="action_restore_to_new_db"
                                        type="object"
                                        string="Restore to New DB"
                                        class="btn-primary"/>

                                <button string="Close" special="cancel" class="btn-secondary"/>
                            </footer>
                        </page>
                    </notebook>

                </sheet>
            </form>
        </field>
    </record>

    <!-- Menu (adjust parent) -->
    <menuitem id="menu_bizcore_root" name="BizCore" sequence="5"/>
    <menuitem id="menu_bizcore_db_tools" name="Database Tools" parent="menu_bizcore_root" sequence="10"/>
    <menuitem id="menu_bizcore_backup_restore"
              name="Backup &amp; Restore"
              parent="menu_bizcore_db_tools"
              action="action_bizcore_db_backup_wizard"
              sequence="10"/>

</odoo>
