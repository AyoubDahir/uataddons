<?xml version="1.0" encoding="UTF-8" ?>
<odoo>


    <!--    <template id="report_bs_template">-->
    <!--        <t t-call="web.html_container">-->
    <!--            &lt;!&ndash; Page header &ndash;&gt;-->
    <!--            <div class="page-header">-->
    <!--                <div style="position: absolute; top: 0; left: 0;">-->

    <!--                </div>-->
    <!--                <div style="text-align: center;">-->
    <!--                    <img t-if="res_company.logo" t-att-src="'data:image/png;base64,%s' % res_company.logo.decode()"-->
    <!--                         style="height: 150px;"/>-->
    <!--                    <h1>Balance Sheet Report</h1>-->
    <!--                </div>-->
    <!--            </div>-->


    <!--            &lt;!&ndash; Main Content &ndash;&gt;-->
    <!--            <t t-foreach="docs.get_bs_report_data(currency_id,report_date)" t-as="header">-->
    <!--                &lt;!&ndash; Display Header Name &ndash;&gt;-->
    <!--                <h2 t-esc="header['header_name']"/>-->
    <!--                <table class="table">-->

    <!--                    <thead>-->
    <!--                        <tr>-->
    <!--                            <th>-->
    <!--                            </th>-->

    <!--                            <th>-->
    <!--                            </th>-->

    <!--                            <th>Account Code</th>-->
    <!--                            <th>Account Name</th>-->
    <!--                            <th colspan="2" style="text-align: right;">Balance</th>-->
    <!--                        </tr>-->
    <!--                    </thead>-->


    <!--                    <tbody>-->
    <!--                        &lt;!&ndash; Loop through subheaders &ndash;&gt;-->
    <!--                        <t t-foreach="header['sub_headers']" t-as="subheader">-->
    <!--                            &lt;!&ndash; Display Subheader Name &ndash;&gt;-->
    <!--                            <tr class="table-info">-->

    <!--                                <td>-->
    <!--                                </td>-->

    <!--                                <td>-->
    <!--                                    <strong t-esc="subheader['sub_header_name']"/>-->
    <!--                                </td>-->

    <!--                                <td colspan="3">-->
    <!--                                </td>-->


    <!--                            </tr>-->
    <!--                            &lt;!&ndash; Loop through accounts under each subheader &ndash;&gt;-->
    <!--                            <t t-foreach="subheader['accounts']" t-as="account">-->
    <!--                                <tr>-->
    <!--                                    <td>-->
    <!--                                    </td>-->

    <!--                                    <td>-->
    <!--                                    </td>-->

    <!--                                    <td t-esc="account['account_code']"/>-->

    <!--                                    <td t-esc="account['account_name']"/>-->

    <!--                                    <td style="text-align: right;">-->
    <!--                                        <span t-esc="account['balance']"/>-->
    <!--                                        <span t-esc="account['currency_symbol']"/>-->
    <!--                                    </td>-->

    <!--                                </tr>-->
    <!--                            </t>-->
    <!--                            &lt;!&ndash; Subheader Total &ndash;&gt;-->
    <!--                            <tr class="table-secondary">-->
    <!--                                <td style="text-align: right;" colspan="4">-->
    <!--                                    <h5 t-esc=" 'Total ' + subheader['sub_header_name']"/>-->
    <!--                                </td>-->
    <!--                                <td style="text-align: right;">-->
    <!--                                    <strong t-esc="subheader['sub_header_total']"/>-->
    <!--                                    <span t-esc="subheader['currency_symbol']"/>-->
    <!--                                </td>-->
    <!--                            </tr>-->
    <!--                        </t>-->
    <!--                    </tbody>-->
    <!--                    &lt;!&ndash; Header Total &ndash;&gt;-->
    <!--                    <tfoot>-->
    <!--                        <tr class="table-primary">-->
    <!--                            <td colspan="4" style="text-align: right;">-->
    <!--                                <h3 t-esc=" 'Total ' + header['header_name']"/>-->
    <!--                            </td>-->
    <!--                            <td style="text-align: right;">-->
    <!--                                <strong t-esc="header['header_total']"/>-->
    <!--                                <span t-esc="header['currency_symbol']"/>-->
    <!--                            </td>-->
    <!--                        </tr>-->


    <!--                    </tfoot>-->
    <!--                </table>-->
    <!--            </t>-->
    <!--        </t>-->
    <!--    </template>-->

    <!--    <template id="report_bs_template">-->
    <!--        <t t-call="web.html_container">-->
    <!--            &lt;!&ndash; Page header &ndash;&gt;-->
    <!--            <div class="page-header">-->
    <!--                <div style="position: absolute; top: 0; left: 0;">-->

    <!--                </div>-->
    <!--                <div style="text-align: center;">-->
    <!--                    <img t-if="res_company.logo" t-att-src="'data:image/png;base64,%s' % res_company.logo.decode()"-->
    <!--                         style="height: 150px;"/>-->
    <!--                    <h1>Balance Sheet Report</h1>-->
    <!--                </div>-->
    <!--            </div>-->

    <!--            &lt;!&ndash; Main Content &ndash;&gt;-->
    <!--            <t t-foreach="docs.get_bs_report_data(currency_id, report_date)" t-as="header">-->
    <!--                &lt;!&ndash; Display Header Name &ndash;&gt;-->
    <!--                <h2 t-esc="header['header_name']"/>-->
    <!--                <table class="table">-->

    <!--                    <thead>-->
    <!--                        <tr>-->
    <!--                            <th>-->
    <!--                            </th>-->

    <!--                            <th>-->
    <!--                            </th>-->

    <!--                            <th>Account Code</th>-->
    <!--                            <th>Account Name</th>-->
    <!--                            <th colspan="2" style="text-align: right;">Balance</th>-->
    <!--                        </tr>-->
    <!--                    </thead>-->

    <!--                    <tbody>-->
    <!--                        &lt;!&ndash; Loop through subheaders &ndash;&gt;-->
    <!--                        <t t-foreach="header['sub_headers']" t-as="subheader">-->
    <!--                            &lt;!&ndash; Display Subheader Name &ndash;&gt;-->
    <!--                            <tr class="table-info">-->

    <!--                                <td>-->
    <!--                                </td>-->

    <!--                                <td>-->
    <!--                                    <strong t-esc="subheader['sub_header_name']"/>-->
    <!--                                </td>-->

    <!--                                <td colspan="3">-->
    <!--                                </td>-->

    <!--                            </tr>-->
    <!--                            &lt;!&ndash; Loop through accounts under each subheader &ndash;&gt;-->
    <!--                            <t t-foreach="subheader['accounts']" t-as="account">-->
    <!--                                <tr>-->
    <!--                                    <td>-->
    <!--                                    </td>-->

    <!--                                    <td>-->
    <!--                                    </td>-->

    <!--                                    <td t-esc="account['account_code']"/>-->

    <!--                                    <td t-esc="account['account_name']"/>-->

    <!--                                    <td style="text-align: right;">-->
    <!--                                        <span t-esc="account['balance']"/>-->
    <!--                                        <span t-esc="account['currency_symbol']"/>-->
    <!--                                    </td>-->

    <!--                                </tr>-->
    <!--                            </t>-->
    <!--                            &lt;!&ndash; Subheader Total &ndash;&gt;-->
    <!--                            <tr class="table-secondary">-->
    <!--                                <td style="text-align: right;" colspan="4">-->
    <!--                                    <h5 t-esc="'Total ' + subheader['sub_header_name']"/>-->
    <!--                                </td>-->
    <!--                                <td style="text-align: right;">-->
    <!--                                    <strong t-esc="subheader['sub_header_total']"/>-->
    <!--                                    <span t-esc="subheader['currency_symbol']"/>-->
    <!--                                </td>-->
    <!--                            </tr>-->
    <!--                        </t>-->
    <!--                    </tbody>-->
    <!--                    &lt;!&ndash; Header Total &ndash;&gt;-->
    <!--                    <tfoot>-->
    <!--                        <tr class="table-primary">-->
    <!--                            <td colspan="4" style="text-align: right;">-->
    <!--                                <h3 t-esc="'Total ' + header['header_name']"/>-->
    <!--                            </td>-->
    <!--                            <td style="text-align: right;">-->
    <!--                                <strong t-esc="header['header_total']"/>-->
    <!--                                <span t-esc="header['currency_symbol']"/>-->
    <!--                            </td>-->
    <!--                        </tr>-->

    <!--                    </tfoot>-->
    <!--                </table>-->
    <!--            </t>-->
    <!--            &lt;!&ndash; Net Profit/Loss &ndash;&gt;-->
    <!--            <t t-if="docs.get_bs_report_data(currency_id, report_date)[-1]['header_name'] == 'Net Profit/Loss'">-->
    <!--                <h2 t-esc="'Net Profit/Loss: ' + docs.get_bs_report_data(currency_id, report_date)[-1]['header_total']"/>-->
    <!--            </t>-->
    <!--        </t>-->
    <!--    </template>-->
    <template id="report_bs_template">
        <t t-call="web.html_container">
            <div class="page" style="font-family: 'Segoe UI', Arial, sans-serif;">
                <!-- Report Header -->
                <div style="background-color: #1a237e; color: white; padding: 20px; margin-bottom: 25px; border-bottom: 4px solid #3949ab;">
                    <h1 style="font-size: 24px; font-weight: bold; margin: 0 0 8px 0; color: white;">Balance Sheet Report</h1>
                    <div style="font-size: 16px; color: white; margin-bottom: 5px;">
                        <t t-if="res_company"><t t-esc="res_company.name"/></t>
                    </div>
                    <div style="font-size: 12px; color: #c5cae9;">
                        As of Date: <strong style="color: white;"><t t-esc="report_date"/></strong>
                    </div>
                </div>

                <!-- Main Content -->
                <t t-set="report_data" t-value="docs.get_bs_report_data(company_id, report_date)"/>
                <t t-foreach="report_data" t-as="header">
                    <table style="width: 100%; border-collapse: collapse; margin-bottom: 25px; font-size: 11px;">
                        <thead>
                            <tr style="background-color: #e8eaf6;">
                                <td colspan="3" style="padding: 12px 10px; font-weight: bold; font-size: 12px; color: #1a237e; border-bottom: 2px solid #c5cae9;">
                                    â–º <t t-esc="header['header_name']"/>
                                </td>
                            </tr>
                            <tr style="background-color: #f5f5f5;">
                                <th style="border-bottom: 2px solid #1a237e; padding: 10px; text-align: left; font-weight: bold; color: #333;">Account Code</th>
                                <th style="border-bottom: 2px solid #1a237e; padding: 10px; text-align: left; font-weight: bold; color: #333;">Account Name</th>
                                <th style="border-bottom: 2px solid #1a237e; padding: 10px; text-align: right; font-weight: bold; color: #333;">Balance (USD)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Loop through subheaders -->
                            <t t-foreach="header['sub_headers']" t-as="subheader">
                                <!-- Display Subheader Name -->
                                <tr style="background-color: #f5f5f5;">
                                    <td colspan="3" style="padding: 10px; font-weight: 600; color: #5c6bc0; border-bottom: 1px solid #e0e0e0;">
                                        <t t-esc="subheader['sub_header_name']"/>
                                    </td>
                                </tr>
                                <!-- Loop through accounts under each subheader -->
                                <t t-foreach="subheader['accounts']" t-as="account">
                                    <tr>
                                        <td style="padding: 8px 10px 8px 35px; color: #757575; border-bottom: 1px solid #eeeeee;"><t t-esc="account['account_code']"/></td>
                                        <td style="padding: 8px 10px; color: #424242; border-bottom: 1px solid #eeeeee;"><t t-esc="account['account_name']"/></td>
                                        <td style="padding: 8px 10px; text-align: right; color: #2e7d32; border-bottom: 1px solid #eeeeee; font-weight: 500;">
                                            <t t-esc="account['balance']"/> <t t-esc="account['currency_symbol']"/>
                                        </td>
                                    </tr>
                                </t>
                                <!-- Subheader Total -->
                                <tr style="background-color: #f5f5f5;">
                                    <td colspan="2" style="padding: 10px; text-align: right; font-weight: 600; color: #424242; border-bottom: 1px solid #e0e0e0;">
                                        Total <t t-esc="subheader['sub_header_name']"/>
                                    </td>
                                    <td style="padding: 10px; text-align: right; font-weight: bold; color: #1a237e; border-bottom: 1px solid #e0e0e0;">
                                        <t t-esc="subheader['sub_header_total']"/> <t t-esc="subheader['currency_symbol']"/>
                                    </td>
                                </tr>
                            </t>
                        </tbody>
                        <!-- Header Total -->
                        <tfoot>
                            <tr style="background-color: #1a237e;">
                                <td colspan="2" style="padding: 15px 10px; font-weight: bold; font-size: 13px; color: white;">
                                    TOTAL <t t-esc="header['header_name']"/>
                                </td>
                                <td style="padding: 15px 10px; text-align: right; font-weight: bold; font-size: 14px; color: white;">
                                    <t t-esc="header['header_total']"/> <t t-esc="header['currency_symbol']"/>
                                </td>
                            </tr>
                        </tfoot>
                    </table>
                </t>
                <!-- Net Profit/Loss -->
                <t t-if="report_data and report_data[-1]['header_name'] == 'Net Profit/Loss'">
                    <div style="background-color: #e8f5e9; padding: 15px; border-radius: 4px; text-align: center; margin-top: 20px;">
                        <span style="font-size: 16px; font-weight: bold; color: #2e7d32;">Net Profit/Loss: <t t-esc="report_data[-1]['header_total']"/></span>
                    </div>
                </t>

                <!-- Footer Note -->
                <div style="text-align: right; font-size: 10px; color: #757575; margin-top: 15px; font-style: italic;">
                    All amounts are expressed in United States Dollars (USD)
                </div>
            </div>
        </t>
    </template>


    <record id="action_report_bs" model="ir.actions.report">
        <field name="name">Balance Sheet Report</field>
        <field name="model">idil.chart.account.header</field>
        <field name="report_type">qweb-html</field>
        <field name="report_name">idil.report_bs_template</field>
        <field name="report_file">idil.report_bs_template</field>
        <field name="binding_model_id" ref="model_idil_chart_account_header"/>
    </record>

    <!--    <record id="view_report_currency_wizard_form" model="ir.ui.view">-->
    <!--        <field name="name">report.currency.wizard.form</field>-->
    <!--        <field name="model">report.currency.wizard</field>-->
    <!--        <field name="arch" type="xml">-->
    <!--            <form string="Select Currency">-->
    <!--                <group>-->
    <!--                    <field name="currency_id"/>-->
    <!--                    <field name="report_date" widget="date"/> &lt;!&ndash; Add this field for selecting the report date &ndash;&gt;-->

    <!--                </group>-->

    <!--                <footer>-->
    <!--                    <button string="Generate Report" type="object" name="generate_report" class="btn-primary"/>-->
    <!--                    <button string="Cancel" class="btn-secondary" special="cancel"/>-->
    <!--                </footer>-->
    <!--            </form>-->
    <!--        </field>-->
    <!--    </record>-->

    <record id="view_report_currency_wizard_form" model="ir.ui.view">
        <field name="name">report.currency.wizard.form</field>
        <field name="model">report.currency.wizard</field>
        <field name="arch" type="xml">
            <form string="Select Company">
                <group>
                    <field name="company_id"/>
                    <field name="report_date" widget="date"/> <!-- Add this field for selecting the report date -->
                </group>
                <footer>
                    <button string="Generate Report" type="object" name="generate_report" class="btn-primary"/>
                    <button string="Cancel" class="btn-secondary" special="cancel"/>
                </footer>
            </form>
        </field>
    </record>

    <!--    <record id="action_report_currency_wizard" model="ir.actions.act_window">-->
    <!--        <field name="name">Currency Selection</field>-->
    <!--        <field name="type">ir.actions.act_window</field>-->
    <!--        <field name="res_model">report.currency.wizard</field>-->
    <!--        <field name="view_mode">form</field>-->
    <!--        <field name="target">new</field>-->
    <!--        <field name="view_id" ref="view_report_currency_wizard_form"/>-->
    <!--    </record>-->
    <record id="action_report_currency_wizard" model="ir.actions.act_window">
        <field name="name">Company Selection</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">report.currency.wizard</field>
        <field name="view_mode">form</field>
        <field name="target">new</field>
        <field name="view_id" ref="view_report_currency_wizard_form"/>
    </record>

</odoo>
