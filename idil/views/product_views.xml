<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>

        <!-- ===================================================== -->
        <!-- ðŸ“¦ Product | Tree View (Icons + Clean)                 -->
        <!-- ===================================================== -->
        <record id="view_product_tree" model="ir.ui.view">
            <field name="name">my_product.product.tree.modern</field>
            <field name="model">my_product.product</field>
            <field name="arch" type="xml">
                <tree string="ðŸ“¦ Products"
                      default_order="id desc"
                      delete="false"
                      decoration-danger="stock_quantity &lt; 10">

                    <field name="image_1920" widget="image"
                           options="{'size': (24, 24)}"
                           string="ðŸ–¼ï¸"/>

                    <field name="name" string="ðŸ“¦ Product"/>
                    <field name="internal_reference" string="ðŸ”– Ref" optional="hide"/>

                    <field name="stock_quantity" string="ðŸ“¦ Stock" readonly="1" optional="show"/>
                    <field name="category_id" string="ðŸ—‚ï¸ Category" optional="show"/>
                    <field name="detailed_type" string="âš™ï¸ Type" optional="show"/>

                    <field name="min_sales_price" string="â¬‡ï¸ Min Price" optional="show"/>
                    <field name="max_sales_price" string="â¬†ï¸ Max Price" optional="show"/>
                    <field name="sale_price" string="ðŸ·ï¸ Sale Price" optional="show"/>
                    <field name="cost" string="ðŸ’° Cost" optional="show"/>
                    
                    <field name="currency_id" optional="hide"/>


                    <field name="usd_currency_id" string="ðŸ’µ USD" optional="hide"/>
                    <field name="total_value_usd" string="ðŸ’µ Total USD" sum="total" optional="show"/>

                    <field name="actual_cost" string="ðŸ§¾ Actual Cost"
                           widget="float" options="{'precision': 4}"
                           optional="hide"/>

                    <field name="asset_account_id" string="ðŸ¦ Asset Acc" optional="hide"/>

                    <field name="is_commissionable" string="ðŸŽ¯ Commission?" optional="hide"/>
                    <field name="account_id" string="ðŸ§¾ Commission Acc" optional="hide"/>

                    <field name="rate_currency_id" string="ðŸ’± Rate Cur" optional="hide"/>
                    <field name="rate" string="ðŸ’± Rate" optional="hide"/>

                </tree>
            </field>
        </record>

        <!-- ===================================================== -->
        <!-- ðŸ“¦ Product | Form View (Modern UI + Icons Everywhere)  -->
        <!-- ===================================================== -->
        <record id="view_product_form" model="ir.ui.view">
            <field name="name">my_product.product.form.modern</field>
            <field name="model">my_product.product</field>
            <field name="arch" type="xml">

                <form string="ðŸ“¦ Product" class="o_form_full o_form_nosheet">

                    <!-- Header -->
                    <header>
                        <button name="export_movements_to_excel"
                                type="object"
                                string="ðŸ“¤ Export Movements"
                                class="btn-primary"/>

                        <span class="ms-2 badge rounded-pill bg-light border text-muted px-3 py-2">
                            <i class="fa fa-cubes me-1"/>
                            Stock:
                            <b><field name="stock_quantity" nolabel="1" readonly="1"/></b>
                        </span>

                        <span class="ms-2 badge rounded-pill bg-light border text-muted px-3 py-2">
                            <i class="fa fa-tag me-1"/>
                            Sale:
                            <b><field name="sale_price" nolabel="1"/></b>
                        </span>

                        <span class="ms-2 badge rounded-pill bg-light border text-muted px-3 py-2">
                            <i class="fa fa-usd me-1"/>
                            Total USD:
                            <b><field name="total_value_usd" nolabel="1"/></b>
                        </span>
                    </header>

                    <sheet>

                        <!-- Title -->
                        <div class="oe_title">
                            <h1 class="mb-1">
                                <i class="fa fa-box text-primary me-2"/>
                                <field name="name" placeholder="Product Name" class="w-100" nolabel="1"/>
                            </h1>
                            <div class="text-muted">
                                <i class="fa fa-info-circle me-1"/>
                                Configure product stock, pricing rules, accounts, and movements.
                            </div>
                        </div>

                        <!-- Top Cards -->
                        <div class="row g-3 mt-3">

                            <!-- Identity -->
                            <div class="col-12 col-lg-7">
                                <div class="border rounded-4 p-3 shadow-sm bg-white">
                                    <div class="fw-bold mb-2">
                                        <i class="fa fa-id-card-o me-2 text-muted"/>
                                        Identity
                                    </div>

                                    <div class="row g-3 align-items-start">

                                        <div class="col-12 col-md-8">
                                            <div class="d-grid gap-2">

                                                <div class="d-flex align-items-center gap-2">
                                                    <span class="text-muted" style="width:24px;text-align:center;">
                                                        <i class="fa fa-hashtag"/>
                                                    </span>
                                                    <span class="o_form_label mb-0" style="min-width:140px;">Internal Ref</span>
                                                    <field name="internal_reference" nolabel="1" class="w-100"/>
                                                </div>

                                                <div class="d-flex align-items-center gap-2">
                                                    <span class="text-muted" style="width:24px;text-align:center;">
                                                        <i class="fa fa-sitemap"/>
                                                    </span>
                                                    <span class="o_form_label mb-0" style="min-width:140px;">Category</span>
                                                    <field name="category_id" nolabel="1" class="w-100"/>
                                                </div>

                                                <div class="d-flex align-items-center gap-2">
                                                    <span class="text-muted" style="width:24px;text-align:center;">
                                                        <i class="fa fa-cogs"/>
                                                    </span>
                                                    <span class="o_form_label mb-0" style="min-width:140px;">Type</span>
                                                    <field name="detailed_type" nolabel="1" class="w-100"/>
                                                </div>

                                            </div>
                                        </div>

                                        <div class="col-12 col-md-4 text-center">
                                            <field name="image_1920"
                                                   widget="image"
                                                   class="oe_avatar"
                                                   options="{'size': [180, 180]}"/>
                                            <div class="text-muted mt-2">
                                                <i class="fa fa-image me-1"/>
                                                Product Image
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>

                            <!-- Summary -->
                            <div class="col-12 col-lg-5">
                                <div class="border rounded-4 p-3 shadow-sm bg-white">
                                    <div class="fw-bold mb-2">
                                        <i class="fa fa-bar-chart me-2 text-muted"/>
                                        Summary
                                    </div>

                                    <div class="d-grid gap-2">

                                        <div class="d-flex align-items-center justify-content-between">
                                            <div class="text-muted"><i class="fa fa-cubes me-1"/>Stock</div>
                                            <div class="fw-bold"><field name="stock_quantity" nolabel="1" readonly="1"/></div>
                                        </div>

                                        <div class="d-flex align-items-center justify-content-between">
                                            <div class="text-muted"><i class="fa fa-cubes me-1"/>Min QTY</div>
                                            <div class="fw-bold"><field name="min_qty" nolabel="1"/></div>
                                             
                                        </div>

                                        
                                        

                                        <div class="d-flex align-items-center justify-content-between">
                                            <div class="text-muted"><i class="fa fa-tag me-1"/>Sale Price</div>
                                            <div class="fw-bold"><field name="sale_price" nolabel="1"/></div>
                                        </div>
                                        <div class="alert alert-info mt-3 mb-0" role="alert">
                                            <i class="fa fa-lightbulb-o me-1"/>
                                            Tip: <b>Sales Price</b> currency is taken from the <b>Asset Account</b> currency. Whenever sales price is used, the system uses the account currency.
                                        </div>
                                        

                                        <div class="d-flex align-items-center justify-content-between">
                                            <div class="text-muted"><i class="fa fa-arrow-down me-1"/>Min Price</div>
                                            <div class="fw-bold"><field name="min_sales_price" nolabel="1"/></div>
                                        </div>

                                        <div class="d-flex align-items-center justify-content-between">
                                            <div class="text-muted"><i class="fa fa-arrow-up me-1"/>Max Price</div>
                                            <div class="fw-bold"><field name="max_sales_price" nolabel="1"/></div>
                                        </div>

                                        <div class="d-flex align-items-center justify-content-between">
                                            <div class="text-muted"><i class="fa fa-usd me-1"/>Total USD</div>
                                            <div class="fw-bold"><field name="total_value_usd" nolabel="1"/></div>
                                        </div>

                                    </div>

                                    <div class="alert alert-info mt-3 mb-0" role="alert">
                                        <i class="fa fa-lightbulb-o me-1"/>
                                        Tip: set <b>Min Sales Price</b> to block low price selling.
                                    </div>

                                </div>
                            </div>

                        </div>

                        <!-- Notebook -->
                        <notebook class="mt-3">

                            <!-- Inventory -->
                            <page string="ðŸ“¦ Inventory" name="page_inventory">
                                <div class="border rounded-4 p-3 shadow-sm bg-white">
                                    <div class="fw-bold mb-2">
                                        <i class="fa fa-archive me-2 text-muted"/>
                                        Inventory Setup
                                    </div>

                                    <div class="d-grid gap-2">

                                        <div class="d-flex align-items-center gap-2">
                                            <span class="text-muted" style="width:24px;text-align:center;"><i class="fa fa-balance-scale"/></span>
                                            <span class="o_form_label mb-0" style="min-width:160px;">UoM</span>
                                            <field name="uom_id" nolabel="1" class="w-100"/>
                                        </div>

                                        <div class="d-flex align-items-center gap-2">
                                            <span class="text-muted" style="width:24px;text-align:center;"><i class="fa fa-money"/></span>
                                            <span class="o_form_label mb-0" style="min-width:160px;">Asset Currency</span>
                                            <field name="asset_currency_id" nolabel="1" class="w-100"/>
                                        </div>

                                        <div class="d-flex align-items-center gap-2">
                                            <span class="text-muted" style="width:24px;text-align:center;"><i class="fa fa-bank"/></span>
                                            <span class="o_form_label mb-0" style="min-width:160px;">Asset Account</span>
                                            <field name="asset_account_id" nolabel="1" class="w-100"/>
                                        </div>

                                    </div>
                                </div>
                            </page>

                            <!-- Sales -->
                            <page string="ðŸ’° Sales" name="page_sales">
                                <div class="border rounded-4 p-3 shadow-sm bg-white">
                                    <div class="fw-bold mb-2">
                                        <i class="fa fa-shopping-cart me-2 text-muted"/>
                                        Sales Setup
                                    </div>

                                    <div class="d-grid gap-2">

                                        <div class="d-flex align-items-center gap-2">
                                            <span class="text-muted" style="width:24px;text-align:center;"><i class="fa fa-tag"/></span>
                                            <span class="o_form_label mb-0" style="min-width:160px;">Sale Price</span>
                                            <field name="sale_price" nolabel="1" class="w-100"
                                                   />
                                        </div>
                                        <div class="alert alert-info mt-3 mb-0" role="alert">
                                            <i class="fa fa-lightbulb-o me-1"/>
                                            Tip: <b>Sales Price</b> currency is taken from the <b>Asset Account</b> currency. Whenever sales price is used, the system uses the account currency.
                                        </div>

                                        <div class="d-flex align-items-center gap-2">
                                            <span class="text-muted" style="width:24px;text-align:center;"><i class="fa fa-arrow-down"/></span>
                                            <span class="o_form_label mb-0" style="min-width:160px;">Min Sales Price</span>
                                            <field name="min_sales_price" nolabel="1" class="w-100"/>
                                        </div>

                                        <div class="d-flex align-items-center gap-2">
                                            <span class="text-muted" style="width:24px;text-align:center;"><i class="fa fa-arrow-up"/></span>
                                            <span class="o_form_label mb-0" style="min-width:160px;">Max Sales Price</span>
                                            <field name="max_sales_price" nolabel="1" class="w-100"/>
                                        </div>

                                        <div class="d-flex align-items-center gap-2">
                                            <span class="text-muted" style="width:24px;text-align:center;"><i class="fa fa-line-chart"/></span>
                                            <span class="o_form_label mb-0" style="min-width:160px;">Income Account</span>
                                            <field name="income_account_id" nolabel="1" class="w-100"/>
                                        </div>

                                        <div class="d-flex align-items-center gap-2">
                                            <span class="text-muted" style="width:24px;text-align:center;"><i class="fa fa-percent"/></span>
                                            <span class="o_form_label mb-0" style="min-width:160px;">Discountible</span>
                                            <field name="is_quantity_discount" nolabel="1"/>
                                        </div>

                                        <div class="d-flex align-items-center gap-2" invisible="not is_quantity_discount">
                                            <span class="text-muted" style="width:24px;text-align:center;"><i class="fa fa-money"/></span>
                                            <span class="o_form_label mb-0" style="min-width:160px;">Discount Currency</span>
                                            <field name="discount_currency_id" nolabel="1" class="w-100"/>
                                        </div>

                                        <div class="d-flex align-items-center gap-2" invisible="not is_quantity_discount">
                                            <span class="text-muted" style="width:24px;text-align:center;"><i class="fa fa-ticket"/></span>
                                            <span class="o_form_label mb-0" style="min-width:160px;">Discount Account</span>
                                            <field name="sales_discount_id" nolabel="1" class="w-100"/>
                                        </div>

                                        <div class="d-flex align-items-center gap-2" invisible="not is_quantity_discount">
                                            <span class="text-muted" style="width:24px;text-align:center;"><i class="fa fa-percent"/></span>
                                            <span class="o_form_label mb-0" style="min-width:160px;">Discount Rate</span>
                                            <field name="discount" nolabel="1" class="w-100"/>
                                        </div>

                                        <div class="d-flex align-items-center gap-2">
                                            <span class="text-muted" style="width:24px;text-align:center;"><i class="fa fa-bullseye"/></span>
                                            <span class="o_form_label mb-0" style="min-width:160px;">Sales Commission?</span>
                                            <field name="is_sales_commissionable" nolabel="1"/>
                                        </div>

                                        <div class="d-flex align-items-center gap-2" invisible="not is_sales_commissionable">
                                            <span class="text-muted" style="width:24px;text-align:center;"><i class="fa fa-percent"/></span>
                                            <span class="o_form_label mb-0" style="min-width:160px;">Commission Rate</span>
                                            <field name="commission" nolabel="1" class="w-100"/>
                                        </div>

                                        <div class="d-flex align-items-center gap-2" invisible="not is_sales_commissionable">
                                            <span class="text-muted" style="width:24px;text-align:center;"><i class="fa fa-money"/></span>
                                            <span class="o_form_label mb-0" style="min-width:160px;">Sales Currency</span>
                                            <field name="sales_currency_id" nolabel="1" class="w-100"/>
                                        </div>

                                        <div class="d-flex align-items-center gap-2" invisible="not is_sales_commissionable">
                                            <span class="text-muted" style="width:24px;text-align:center;"><i class="fa fa-file-text-o"/></span>
                                            <span class="o_form_label mb-0" style="min-width:160px;">Sales Comm Account</span>
                                            <field name="sales_account_id" nolabel="1" class="w-100"/>
                                        </div>

                                    </div>
                                </div>
                            </page>

                            <!-- Costing -->
                            <page string="ðŸ§® Costing" name="page_costing">
                                <div class="border rounded-4 p-3 shadow-sm bg-white">
                                    <div class="fw-bold mb-2">
                                        <i class="fa fa-calculator me-2 text-muted"/>
                                        Costing &amp; Accounts
                                    </div>

                                    <div class="d-grid gap-2">

                                        <div class="d-flex align-items-center gap-2">
                                            <span class="text-muted" style="width:24px;text-align:center;"><i class="fa fa-cubes"/></span>
                                            <span class="o_form_label mb-0" style="min-width:160px;">BOM</span>
                                            <field name="bom_id" nolabel="1" class="w-100"/>
                                        </div>

                                        <div class="d-flex align-items-center gap-2">
                                            <span class="text-muted" style="width:24px;text-align:center;"><i class="fa fa-edit"/></span>
                                            <span class="o_form_label mb-0" style="min-width:160px;">Manual Cost?</span>
                                            <field name="is_cost_manual_purchase" nolabel="1"/>
                                        </div>

                                        <div class="d-flex align-items-center gap-2">
                                            <span class="text-muted" style="width:24px;text-align:center;"><i class="fa fa-money"/></span>
                                            <span class="o_form_label mb-0" style="min-width:160px;">Cost</span>
                                            <field name="cost" nolabel="1" class="w-100"/>
                                        </div>
                                        <div class="alert alert-info mt-3 mb-0" role="alert">
                                            <i class="fa fa-lightbulb-o me-1"/>
                                            Tip: <b>Cost Price</b> currency is taken from the <b>Asset Account</b> currency. Whenever cost price is used, the system uses the Asset Account currency.
                                        </div>

                                      <div class="d-flex align-items-center gap-2">
                                            <span class="text-muted" style="width:24px;text-align:center;"><i class="fa fa-money"/></span>
                                            <span class="o_form_label mb-0" style="min-width:160px;">COGS Currency</span>
                                            <field name="currency_cogs_id" nolabel="1" class="w-100"/>
                                        </div>

                                        <div class="d-flex align-items-center gap-2">
                                            <span class="text-muted" style="width:24px;text-align:center;"><i class="fa fa-credit-card"/></span>
                                            <span class="o_form_label mb-0" style="min-width:160px;">COGS Account</span>
                                            <field name="account_cogs_id" nolabel="1" class="w-100"/>
                                        </div>

                                        <div class="d-flex align-items-center gap-2">
                                            <span class="text-muted" style="width:24px;text-align:center;"><i class="fa fa-exchange"/></span>
                                            <span class="o_form_label mb-0" style="min-width:160px;">Adjustment Account</span>
                                            <field name="account_adjustment_id" nolabel="1" class="w-100"/>
                                        </div>

                                        

                                        <div class="d-flex align-items-center gap-2">
                                            <span class="text-muted" style="width:24px;text-align:center;"><i class="fa fa-bullseye"/></span>
                                            <span class="o_form_label mb-0" style="min-width:160px;">Manufacturing Comm?</span>
                                            <field name="is_commissionable" nolabel="1"/>
                                        </div>

                                        <div class="d-flex align-items-center gap-2" invisible="not is_commissionable">
                                            <span class="text-muted" style="width:24px;text-align:center;"><i class="fa fa-money"/></span>
                                            <span class="o_form_label mb-0" style="min-width:160px;">Currency</span>
                                            <field name="currency_id" nolabel="1" class="w-100"/>
                                        </div>

                                        <div class="d-flex align-items-center gap-2" invisible="not is_commissionable">
                                            <span class="text-muted" style="width:24px;text-align:center;"><i class="fa fa-file-text-o"/></span>
                                            <span class="o_form_label mb-0" style="min-width:160px;">Commission Account</span>
                                            <field name="account_id" nolabel="1" class="w-100"/>
                                        </div>

                                    </div>
                                </div>
                            </page>

                            <!-- Movement History -->
                            <page string="ðŸ“œ Movement History" name="page_movements">
                                <div class="border rounded-4 p-3 shadow-sm bg-white">
                                    <div class="fw-bold mb-2">
                                        <i class="fa fa-history me-2 text-muted"/>
                                        Movements
                                    </div>

                                    <div class="row g-3">
                                        <div class="col-12 col-md-6">
                                            <div class="d-flex align-items-center gap-2">
                                                <span class="text-muted" style="width:24px;text-align:center;"><i class="fa fa-calendar"/></span>
                                                <span class="o_form_label mb-0" style="min-width:160px;">Start Date</span>
                                                <field name="start_date" nolabel="1" class="w-100"/>
                                            </div>
                                        </div>
                                        <div class="col-12 col-md-6">
                                            <div class="d-flex align-items-center gap-2">
                                                <span class="text-muted" style="width:24px;text-align:center;"><i class="fa fa-calendar"/></span>
                                                <span class="o_form_label mb-0" style="min-width:160px;">End Date</span>
                                                <field name="end_date" nolabel="1" class="w-100"/>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="mt-3">
                                        <field name="movement_ids" nolabel="1">
                                            <tree create="false" delete="false" editable="false" limit="100">
                                                <field name="date" string="ðŸ“… Date"/>
                                                <field name="movement_type" string="ðŸ”„ Type"/>
                                                <field name="vendor_id" string="ðŸ·ï¸ Vendor"/>
                                                <field name="quantity" string="ðŸ“¦ Qty" sum="Total"/>
                                                <field name="source_document" string="ðŸ“„ Source"/>
                                                <field name="sales_person_id" string="ðŸ§‘â€ðŸ’¼ Salesperson"/>
                                                <field name="customer_id" string="ðŸ‘¤ Customer"/>
                                                <field name="destination" string="ðŸ“ Destination"/>
                                                <field name="employee_id" string="ðŸ‘· Employee"/>
                                            </tree>
                                        </field>
                                    </div>

                                </div>
                            </page>

                        </notebook>

                    </sheet>
                </form>
            </field>
        </record>

        <!-- ===================================================== -->
        <!-- ðŸš€ Product Action                                     -->
        <!-- ===================================================== -->
        <record id="action_view_product" model="ir.actions.act_window">
            <field name="name">ðŸ“¦ Products</field>
            <field name="res_model">my_product.product</field>
            <field name="view_mode">tree,form</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    Create your first Product
                </p>
                <p>
                    Set stock accounts, sale price rules (Min/Max), and review movements.
                </p>
            </field>
        </record>

    </data>
</odoo>
